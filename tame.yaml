
settings:
  init: "set -eu"

targets:

  # echo:
  #   args: {$msg: ~}
  #   body:
  #     - shell: echo my msg $msg
  #       out: $res
  #   return: $res

  # name:
  #   body:
  #     - call:
  #         echo: {$msg: barna}
  #       result: $echores
  #   return: "$echores"

  mapme:
    body:
      - var:
          $nullme: null
          $isit: true
          $floatme: 3.1415
          $num: 1
          $my:
            lovely: "is amazing"
            again: "somth"
            deeper:
              how: "deepisyour"
              listzz:
                - one: "is"
                  two: "loneliest"
                - 22
                - and:
                    it: "goes"
                    deeper: "too"
      - shell: echo $my_lovely
      - shell: echo $my_again
      - shell: echo $my_deeper_how


  setone:
    body:
      - var:
          $person.sign.last: "yolo"
  settwo:
    body:
      - var:
          $person:
            sign:
              last: "yolo"
  updone:
    body:
      - var:
          $person:
            sign:
              last: "yolo"
      - var:
          $person.sign.first: "ok"
      - shell: echo ${person_sign_first}
      - shell: echo ${person_sign_last}

  trunc:
    body:
      - var:
          $person:
            sign:
              last: "yolo"
      - var:
          $person.sign: "over"
      - shell: echo ${person_sign}


  argme:
    args:
      $hello:
        tourist: "messageworld"
        dubist: ~
    body:
      - shell: "echo adding ${hello_tourist}"
        out: $hello.dubist
        opts: [silent]
      - shell: "echo adding ${hello_tourist_dubist}"
        opts: [silent]
    return: "$hello"

  getme:
    body:
      - call:
          argme: {}
        result: $hey
      - shell: echo $hey_dubist

  listme:
    body:
    - var:
        $list:
          - hey
          - okay
          - but:
              my: love
    - shell: echo ${list_2_but_my}
    return: $list

  mapme2:
    body:
      - call:
          listme: ~
        result: $l
      - shell: echo ${l_2_but_my}


  test1:
    body:
      - var:
          $hello:
            na: "tourist"
            ja: "oook"
      - var:
          $hello.na: "new"
      - shell: echo ${hello_ja}

  test2:
    body:
      - var:
          $hello:
          - na: "tourist"
          - ja: "oook"
      - var:
          $hello[1]: "new"
      - shell: env | grep hello
      - shell: echo ${hello_1}






  yolo:
    body:
      - var:
          $myvar: "lovelyday"
          $other: "notso good"
      - shell: echo $myvar
      - var:
          $myvar.de: 1
      - shell: echo $myvar_de
